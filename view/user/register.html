{extend name="layout/base" /} {block name="title"}用户注册 -
在线购物系统{/block} {block name="content"}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="neomorphic-card register-card">
        <div class="card-header p-3 text-center">
          <h3 class="mb-0 gradient-heading">用户注册</h3>
          <div class="header-line"></div>
        </div>
        <div class="card-body p-4">
          <form id="registerForm">
            <div class="mb-4">
              <label for="username" class="form-label">用户名</label>
              <div class="input-wrapper">
                <input
                  type="text"
                  class="form-control neomorphic-input"
                  id="username"
                  name="username"
                  required
                />
                <div class="form-text">用户名长度为3-20个字符</div>
              </div>
            </div>
            <div class="mb-4">
              <label for="password" class="form-label">密码</label>
              <div class="input-wrapper">
                <input
                  type="password"
                  class="form-control neomorphic-input"
                  id="password"
                  name="password"
                  required
                />
                <div class="form-text">密码长度为6-20个字符</div>
              </div>
            </div>
            <div class="mb-4">
              <label for="confirm_password" class="form-label">确认密码</label>
              <div class="input-wrapper">
                <input
                  type="password"
                  class="form-control neomorphic-input"
                  id="confirm_password"
                  name="confirm_password"
                  required
                />
              </div>
            </div>
            <div class="mb-4">
              <label for="mobile" class="form-label">手机号码</label>
              <div class="input-wrapper">
                <input
                  type="tel"
                  class="form-control neomorphic-input"
                  id="mobile"
                  name="mobile"
                  required
                />
              </div>
            </div>
            <div class="mb-4">
              <label for="email" class="form-label">邮箱（选填）</label>
              <div class="input-wrapper">
                <input
                  type="email"
                  class="form-control neomorphic-input"
                  id="email"
                  name="email"
                />
              </div>
            </div>
            <div class="mb-4">
              <label for="real_name" class="form-label">真实姓名（选填）</label>
              <div class="input-wrapper">
                <input
                  type="text"
                  class="form-control neomorphic-input"
                  id="real_name"
                  name="real_name"
                />
              </div>
            </div>
            <input
              type="hidden"
              name="redirect"
              value="{$redirect|default=''}"
            />
            <div class="d-grid gap-2">
              <button type="submit" class="neomorphic-btn register-btn">
                注册
              </button>
            </div>
          </form>
          <div class="mt-4 text-center">
            <p>
              已有账号？<a
                href="/user/login{$redirect ? '?redirect='.$redirect : ''}"
                class="gradient-link"
                >立即登录</a
              >
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{/block} {block name="css"}
<style>
  /* 渐变标题 */
  .gradient-heading {
    font-weight: 700;
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* 卡片头部线条 */
  .header-line {
    height: 3px;
    background: var(--accent-gradient);
    margin: 10px auto 0;
    width: 50px;
    border-radius: 3px;
  }

  /* 注册卡片 */
  .register-card {
    max-width: 500px;
    margin: 30px auto;
    border-radius: 20px;
  }

  /* 表单控件 */
  .input-wrapper {
    position: relative;
    margin-bottom: 0.5rem;
  }

  .neomorphic-input {
    width: 100%;
    padding: 12px 15px;
    border: none;
    border-radius: 10px;
    background: var(--card-bg);
    color: var(--text-primary) !important;
    box-shadow: inset 3px 3px 5px var(--shadow-color-dark),
      inset -3px -3px 5px var(--shadow-color-light);
    transition: all 0.3s ease;
  }

  .neomorphic-input:focus {
    outline: none;
    box-shadow: inset 4px 4px 8px var(--shadow-color-dark),
      inset -4px -4px 8px var(--shadow-color-light);
    background-color: var(--card-bg) !important;
  }

  /* 覆盖导航栏搜索框样式 */
  .register-card .form-control {
    background: var(--card-bg) !important;
    color: var(--text-primary) !important;
    box-shadow: inset 3px 3px 5px var(--shadow-color-dark),
      inset -3px -3px 5px var(--shadow-color-light) !important;
  }

  .register-card .form-control:focus {
    background: var(--card-bg) !important;
    box-shadow: inset 4px 4px 8px var(--shadow-color-dark),
      inset -4px -4px 8px var(--shadow-color-light) !important;
  }

  .register-card .form-control::placeholder {
    color: var(--text-muted) !important;
  }

  /* 表单标签 */
  .form-label {
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
  }

  /* 表单提示文本 */
  .form-text {
    color: var(--text-muted);
    font-size: 0.85rem;
    margin-top: 0.25rem;
  }

  /* 注册按钮 */
  .register-btn {
    font-size: 1.1rem;
    padding: 12px;
  }

  /* 渐变链接 */
  .gradient-link {
    font-weight: 600;
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-decoration: none;
    position: relative;
  }

  .gradient-link::after {
    content: "";
    position: absolute;
    width: 100%;
    height: 2px;
    background: var(--primary-gradient);
    bottom: -2px;
    left: 0;
    transform: scaleX(0);
    transition: transform 0.3s ease;
    transform-origin: right;
  }

  .gradient-link:hover::after {
    transform: scaleX(1);
    transform-origin: left;
  }

  /* 确保所有按钮可点击 */
  button,
  .neomorphic-btn {
    position: relative;
    z-index: 5;
  }
</style>
{/block} {block name="js"}
<script>
  $(function () {
    $("#registerForm").submit(function (e) {
      e.preventDefault();

      // 验证密码是否一致
      var password = $("#password").val();
      var confirmPassword = $("#confirm_password").val();
      if (password !== confirmPassword) {
        alert("两次输入的密码不一致");
        return;
      }

      $.ajax({
        url: "/user/register",
        type: "POST",
        data: $(this).serialize(),
        dataType: "json",
        success: function (res) {
          if (res.code === 1) {
            // 注册成功，跳转到指定页面
            window.location.href =
              res.data && res.data.url ? res.data.url : "/";
          } else {
            alert(res.msg);
          }
        },
        error: function () {
          alert("服务器错误，请稍后再试");
        },
      });
    });
  });
</script>
{/block}
